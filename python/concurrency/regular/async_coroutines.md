<!-- TOC -->
* [Введение](#введение)
* [Что такое корутины?](#что-такое-корутины)
* [Создание корутин](#создание-корутин)
* [Асинхронные функции и ключевое слово async](#асинхронные-функции-и-ключевое-слово-async)
* [Ожидание корутин и ключевое слово await](#ожидание-корутин-и-ключевое-слово-await)
* [Асинхронные итераторы и контекстные менеджеры](#асинхронные-итераторы-и-контекстные-менеджеры)
* [Запуск корутин с asyncio](#запуск-корутин-с-asyncio)
* [Примеры использования asyncio](#примеры-использования-asyncio)
* [Полезные утилиты asyncio](#полезные-утилиты-asyncio)
* [Заключение](#заключение)
<!-- TOC -->

# Введение
Корутины в Python предоставляют мощный инструмент для написания асинхронного кода, который может выполнять несколько задач одновременно без необходимости использования многопоточности. 
Асинхронное программирование позволяет писать программы, которые могут обрабатывать множество операций ввода-вывода (I/O) параллельно, используя единый поток.

# Что такое корутины?
Корутины — это специальные функции, которые могут приостанавливать свое выполнение и передавать управление обратно в вызывающую программу, при этом сохраняя свое состояние для последующего возобновления.

Пример корутины:
```python
def simple_coroutine():
    print('Корутин запущен')
    x = yield
    print('Получено значение:', x)
```

# Создание корутин
Корутины в Python создаются с помощью ключевого слова `async`.

Пример асинхронной функции:
```python
async def my_coroutine():
    print("Привет из корутины")
    await asyncio.sleep(1)
    print("Прошло 1 секунда")
```

# Асинхронные функции и ключевое слово async
Асинхронные функции определяются с помощью ключевого слова `async` перед `def`. Такие функции возвращают объект корутины.

Пример:
```python
async def fetch_data():
    print("Начало получения данных")
    await asyncio.sleep(2)
    print("Данные получены")
```

# Ожидание корутин и ключевое слово await
Для ожидания завершения корутины используется ключевое слово `await`, которое приостанавливает выполнение текущей корутины до тех пор, пока ожидаемая корутина не завершится.

Пример:
```python
async def main():
    print("Запуск основной функции")
    await fetch_data()
    print("Завершение основной функции")

asyncio.run(main())
```

# Асинхронные итераторы и контекстные менеджеры
Асинхронные итераторы и контекстные менеджеры позволяют использовать `async`/`await` в циклах и при управлении ресурсами.

Пример асинхронного итератора:
```python
class AsyncIterator:
    def __init__(self):
        self.i = 0

    async def __aiter__(self):
        return self

    async def __anext__(self):
        if self.i >= 5:
            raise StopAsyncIteration
        self.i += 1
        await asyncio.sleep(1)
        return self.i

async def main():
    async for item in AsyncIterator():
        print(item)

asyncio.run(main())
```

Пример асинхронного контекстного менеджера:
```python
class AsyncContextManager:
    async def __aenter__(self):
        print("Вход в контекст")
        return self

    async def __aexit__(self, exc_type, exc, tb):
        print("Выход из контекста")

async def main():
    async with AsyncContextManager():
        print("Внутри контекста")

asyncio.run(main())
```

# Запуск корутин с asyncio
Для запуска корутин используется функция `asyncio.run()`, которая запускает корутину и блокирует выполнение, пока она не завершится.

Пример:
```python
async def say_hello():
    print("Привет, мир!")
    await asyncio.sleep(1)
    print("Прощай, мир!")

asyncio.run(say_hello())
```

# Примеры использования asyncio
Асинхронные программы часто используют `asyncio` для выполнения ввода-вывода без блокировки.

Пример использования `asyncio.gather()` для параллельного выполнения нескольких корутин:
```python
async def fetch_page(url):
    print(f"Fetching {url}")
    await asyncio.sleep(2)
    print(f"Finished {url}")

async def main():
    urls = ["http://example.com", "http://example.org", "http://example.net"]
    await asyncio.gather(*(fetch_page(url) for url in urls))

asyncio.run(main())
```

# Полезные утилиты asyncio
Библиотека `asyncio` предоставляет множество полезных утилит для управления асинхронными задачами.

Пример использования `asyncio.create_task()` для создания задач:
```python
async def main():
    task1 = asyncio.create_task(fetch_data())
    task2 = asyncio.create_task(say_hello())
    await task1
    await task2

asyncio.run(main())
```

# Заключение
Асинхронное программирование в Python с использованием корутин и библиотеки `asyncio` предоставляет мощный и эффективный способ управления конкурентными задачами, особенно полезный при работе с операциями ввода-вывода. 
Изучение и понимание этих концепций позволяет создавать более производительные и отзывчивые приложения.